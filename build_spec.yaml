version: 0.1
component: build
timeoutInSeconds: 10000
shell: bash
failImmediatelyOnError: true
env:
  exportedVariables:
    - now

steps:

  - type: Command
    name: "ls"
    command: |
      echo `ls ${OCI_WORKSPACE_DIR}`

  - type: Command
    name: "Upload deployment yaml"
    command: |
      oci artifacts generic artifact upload-by-path \
      --repository-id ocid1.devopsdeployartifact.oc1.iad.amaaaaaacsgkr3yapcebmiokeyqpknm3vc6z7kek2vfty2emownclqvmwsaq \
      --artifact-path deployment_spec.yaml \
      --artifact-version 3.4 \
      --content-body test.json